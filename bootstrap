#!/bin/bash
. bash.bashrc
. function.sh

computer="$1" install="$(wtu "$2")"; shift 2

! IsElevated && { EchoErr "bootstrap must be run as administrator"; pause; exit 1; }

# link ad_ account data directory to corresponding non-ad account data directory
 if [[ "$USERNAME" =~ ^ad_ ]]; then
 	src="$USERS/${USERNAME#ad_}/Documents/data" link="$USERS/${USERNAME}/Documents/data"
 	mkdir --parents "$src" || return
	MakeLink "$src" "$link" || return
 fi

# copy common files
[[ ! -d "$PUB/Documents/data/bin" ]] && { SyncLocalFiles --src-older "$computer" || return; }

# bootstrap configuration
inst --NoRunPrompt --hint "$install" bootstrap

# install additional applications
for app in "$@"; do inst --NoRunPrompt --hint "$install" "$app"; done
