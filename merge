#!/usr/bin/env bash
. function.sh

usage()
{
	echot "\
usage: merge SRC DEST
	Merge contents of source and destination files using an installed merge program"
	exit $1
}

[[ "$1" == @(-h|--help) ]] && usage 0

webDAV=; egrep -i "@ssl@5006" > /dev/null <<< "$@" && webDav="true"

if IsInstalled BeyondCompare && [[ ! $WebDAV ]]; then
	BeyondCompare start "$@"

elif InPath meld; then
	[[ "$1" == "--wait" ]] && { shift; meld "$@"; } || start meld "$@"

elif InPath kompare; then
	kompare "$@"

else
	TextEdit "$@"

fi
