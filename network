#!/bin/bash
. function.sh

init() 
{
	command='tc network'
}

usage()
{
	echot "\
usage: template [one|two|cd](one)
	check <network> 										perform the first command"
	exit $1
}

args()
{
	while [ "$1" != "" ]; do
		case "$1" in
			-f|--file) shift; file="$1";;
			-s|--server) shift; server="$1";;
			-i|--interactive) interactive="-i";;
			-t|--test) test="-t";;
			-v|--verbose) verbose="-v";;
			-h|--help) usage 0;;
			*) 
				if [[ "$1" == @(sub|check) ]]; then { command="${1,,}"; shift; break; }
				elif IsFunction "${1,,}Command"; then command="${1,,}"
				else { echoerr "Unknown argument $1"; usage 1; }
				fi;;
		esac
		shift
	done
	args=( "$@" )
}

run() {	init; args "$@"; ${command}Command "${args[@]}"; }

initializeCommand()
{
	return 0
}

checkCommand() 
{
	tc network.btm check "$@"
}

twoCommand() {  echo "command=$command"; }

subCommand()
{
	command="One"
	[[ $# > 0 ]] && ProperCase "$1" s; IsFunction Sub${s}Command && { command="$s"; shift; }
	[[ $# != 0 ]] && usage
	Sub${command}Command "$@"
}

SubOneCommand() { echo "command=Sub$command args=${#args[@]} file=\"$file\" server=\"$server\" interactive=$interactive verbose=$verbose test=$test"; }
SubTwoCommand() {  echo "command=Sub$command"; }

run "$@"
