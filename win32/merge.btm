@echo off
SetLocal
call BeyondCompare.btm start %$
quit $=%?
echo %$ | egrep -i @ssl@5006 >& nul:
set WebDAV=%@if[ %? == 0,true]

REM BeyondCompare cannot save files to WebDAV shares
iff %@IsInstalled[BeyondCompare] == 1 .and. not defined WebDAV then
	call BeyondCompare.btm start %$

elseiff %@IsInstalled[WinMerge] == 1 then
	call WinMerge start %$

elseiff %@IsInstalled[emacs] == 1 then
	call emacs start %$

else
	call TextEdit %$

endiff

quit %?