#!/usr/bin/env bash
. function.sh || exit

run() {	init && args "$@" && ${command}Command "${args[@]}"; }

init() { :; }

usage()
{
	echot "\
usage: wiggin off
	off			power off all devices in the Wiggin study network closet switch"
	exit $1
}

args()
{
	unset file

	[[ $# == 0 ]] && { command="show"; return; }

	while (( $# != 0 )); do
		case "$1" in "") : ;;
			--help) usage 0;;
			*)
				! IsOption "$1" && [[ ! $command ]] && { CheckCommand "$1"; command="${1,,}"; shift; continue; }
				UnknownOption "$1"
		esac
		shift
	done

	args=("$@")
}

offCommand() 
{ 
	local devices=( pi5 pi6 rp1 )
	ask "Are you sure you want to power off all Wiggin devices" -dr n || return

	for device in "${devices[@]}"; do
		echo power off "$device"
	done
}

run "$@"
