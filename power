#!/bin/bash
. function.sh

usage()
{
	echot "\
usage: template [one|two|cd](one)
	Perform template commands
	one										perform the first command
	two										perform the second command
	sub one|two						perform a sub command
	-f, --file <file>			the file for the command
	-s, --show						show results
	-v, --verbose					display detailed output"
	exit $1
}

init() { :; }

args()
{
	while [ "$1" != "" ]; do
		case "$1" in
			-h|--help) IsFunction "${command}Usage" && ${command}Usage || usage 0;;
			*)
				[[ ! $command ]] && IsFunction "${1,,}Command" && { command="${1,,}"; shift; continue; }	# command
				[[ "$command" == @(sleep) ]] && break
				UnknownOption "$1"
		esac
		shift
	done
	[[ ! $command ]] && MissingOperand "command"
	args=("$@")
}

run() {	init; args "$@"; ${command}Command "${args[@]}"; }

sleepCommand()
{
	echo "Issuing sleep..."
	psshutdown -d -t 0
}

rebootCommand()
{
	echo "Issuing reboot..."
	psshutdown -r -f -t 0
}

run "$@"
