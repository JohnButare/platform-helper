#!/usr/bin/env bash

. function.sh

usage() { echot "usage: startup [startup|close](startup)
	Startup applications on user login";	exit $1; }

args()
{
	unset wait
	command="startup"

	while [ "$1" != "" ]; do
		case $1 in
			startup|close) command="$1";;
			-w|--wait) wait="true";;
			-h|--help) usage 0;;
			*) UnknownOption "$1";;
		esac
		shift
	done
}

run()
{
	args "$@"

	SshAgent startup || return

	[[ "$command" == "close" ]] && printf "close...." || printf "start..."
	[[ -f "$UBIN/startup.sh" ]] && . "$UBIN/startup.sh" "$command"
	echo "done"
	[[ $wait ]] && ask 'Continue' -d 240
}

run "$@"
